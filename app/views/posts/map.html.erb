<div id="map"></div>
<style>
  #map { height: 600px;}
</style>
<script>

    var mymap = L.map('map').setView([<%= @post.lat %>, <%= @post.long %>], 5);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(mymap);

    <% @geo_maxing_posts.each do |post| %>
      var title = "<%= truncate(post.title, length: 20) %>"
      var content = "<%= post.content.present? ? truncate(post_content_for_map(post), length: 40).to_s : 'Body missing' %>"
      var marker = L.marker([<%= post.lat %>, <%= post.long %>]).addTo(mymap)
          .bindPopup(`<a style="color:black;" href="<%= post_path(post) %>"><b>${title}</b><br/>${content}</a>`)
      <% if post == @post %>
        marker.openPopup();
      <% end %>
    <% end %>

    // georgia coordinates = [32.1656, -82.9001]

</script>
